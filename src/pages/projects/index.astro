---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import ProjectCard from '../../components/ProjectCard.astro';

const projects = (await getCollection('projects')).filter((p) => p.id.endsWith('.mdx'));
const sorted = projects
  .slice()
  .sort((a, b) => Number(b.data.featured) - Number(a.data.featured));
---

<BaseLayout
  title="Projects | Kenneth Wong Cun Wi"
  description="Robotics and embedded projects by Kenneth Wong Cun Wi."
  canonicalPath="/projects/"
  activeNav="projects"
>
  <section class="section">
    <div class="container">
      <div class="section-head">
        <h2>Projects</h2>
        <p class="muted">Everything here is MDX-backed (easy to edit).</p>
      </div>

      <div class="grid cards">
        {sorted.map((p) => (
          <ProjectCard entry={p} />
        ))}
      </div>

      <div class="section-foot">
        <a class="button" href="/">â† Back home</a>
      </div>
    </div>
  </section>
</BaseLayout>
